<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link href="../img/favicon.ico" rel="SHORTCUT ICON" />
<title>Ajax文件传输Demo</title>
		<!-- 这里引入的JQUERY是用的webJar -->
<script src="/demo/webjars/jquery/1.8.3/jquery.js"></script> 
</head>
<body>
	<form id="studentAddForm" method="post" enctype="multipart/form-data" onsubmit="return false">
		姓名： <input id="studentName" name="name" type="text"> </br>
		 密码： <input id="studentSex" name="pass" type="text"> </br> 
		 头像： <input id="file" name="file" type="file"> </br> 
		<input type="button" value="添加" onclick="checkForm()">
	</form>
</body>
<script>
	//Ajax文件上传，页面无跳转
    function checkForm() 
	{
        var formData = new FormData($("#studentAddForm")[0]);
        $.ajax({
            url : "/demo/saveStudentInfo",
            type : 'POST',
            dataType : "json",
            data : formData,
            cache: false,		//设置为 false 将不缓存此页面。
            async: false,			//异步关闭
            processData : false,  //必须false才会避开jQuery对 formdata 的默认处理
            contentType : false,  //必须false才会自动加上正确的Content-Type
            success: function (data) {
           		alert(data.msg);
            },
            error: function (a,b) {
            	alert(b);
            }
        });
    }
</script>

</html>